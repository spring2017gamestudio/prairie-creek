<html>

<head>
  <meta name="viewport"
        content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
    <title>current-location tdd-test</title>

    <script src="../../bower_components/webcomponentsjs/webcomponents-lite.js"></script>
    <script src="../../bower_components/web-component-tester/browser.js"></script>

    <!-- Step 1: import the element to test -->
    <link rel="import"
          href="../../src/current-location/current-location.html">

</head>

<body>
  <test-fixture id="no-location">
    <template>
      <current-location>
      </current-location>
    </template>
  </test-fixture>

  <test-fixture id="has marked location">
    <template>
      <current-location current-latitude="13"
                   current-longitude="14"
                   range="5"
                   marked-locations='[{"latitude":13,"longitude":14}]'>
        </current-location>
    </template>
  </test-fixture>

  <test-fixture id="has multiple marked locations">
    <template>
      <current-location current-latitude="0"
                   current-longitude="0"
                   range="5"
                   marked-locations='[{"latitude":13,"longitude":14},{"latitude":3,"longitude":4}]'>
        </current-location>
    </template>
  </test-fixture>

  <script>
    suite('not at any location', function () {
      var element;

      setup(function () {
        element = fixture('no-location');
      });

      test('location is undefined', function () {
        assert.isUndefined(element.location);
      });
    });

    suite('has stored a marked location', function () {
      var element;

      setup(function () {
        element = fixture('has marked location')
      });

      test('within range of marked location', function () {
        element.currentLatitude = 10;
        element.currentLongitude = 10;
        assert.deepEqual(element.currentMarkedLocation, { latitude: 13, longitude: 14 });
      });

      test('not within range of marked location', function () {
        element.currentLatitude = 0;
        element.currentLongitude = 0;
        assert.isUndefined(element.currentMarkedLocation);
      });
    });

    suite('has stored many marked locations', function () {
      var element;

      setup(function () {
        element = fixture('has multiple marked locations')
      });

      test('within range of first marked location then move and be in range of second', function () {
        assert.deepEqual(element.currentMarkedLocation, { latitude: 3, longitude: 4 });
        element.currentLatitude = 10;
        element.currentLongitude = 10;
        assert.deepEqual(element.currentMarkedLocation, { latitude: 13, longitude: 14 });
      })
    });
  </script>

</body>

</html>