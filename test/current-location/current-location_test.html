<html>

<head>
  <meta name="viewport"
        content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
    <title>current-location tdd-test</title>

    <script src="../../bower_components/webcomponentsjs/webcomponents-lite.js"></script>
    <script src="../../bower_components/web-component-tester/browser.js"></script>

    <!-- Step 1: import the element to test -->
    <link rel="import"
          href="../../src/current-location/current-location.html">

</head>

<body>
  <test-fixture id="no-location">
    <template>
      <current-location>
      </current-location>
    </template>
  </test-fixture>

  <test-fixture id="default">
    <template>
      <current-location latitude="13"
                        longitude="14"
                        </current-location>
    </template>
  </test-fixture>


  <script>
    const mapData = [
      {
        latitude: 13,
        longitude: 14,
        range: 1,
      },
      {
        latitude: 3,
        longitude: 4,
        range: 1
      }
    ];

    describe('not at any location', function () {
      var element;

      before(function () {
        element = fixture('no-location');
      });

      it('is undefined location', function () {
        expect(element.location).to.be.undefined;
      });
    });

    describe('at first location', function () {
      var element;

      before(function () {
        element = fixture('default');
        element.locations = mapData;
      });

      it('sets location to be the first location', function () {
        console.log(element.locations);
        expect(element.location).to.deep.equal(element.locations[0]);
      });

      describe('moving out of range after having been at a location', function () {
        it('within range of first marked location then move and be in range of second', function () {
          element.latitude = 0;
          element.longitude = 0;
          expect(element.location).to.be.undefined;
        })
      });

      describe('moving in range of another location after having been at one', function() {
        it('sets location to the new one', function() {
          element.latitude = 3;
          element.longitude = 4;
          expect(element.location).to.deep.equal(element.locations[1]);
        });
      });
    });

    describe('out of range of any location', function () {
      var element;

      before(function () {
        element = fixture('default');
        element.locations = mapData;
        element.latitude = 0;
        element.longitude = 0;
      });

      it('sets location to undefined', function () {
        expect(element.location).to.be.undefined;
      });
    });
  </script>

</body>

</html>