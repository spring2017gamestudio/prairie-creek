<link rel="import"
      href="../../bower_components/polymer/polymer.html">
<link rel="import"
      href="../../bower_components/paper-button/paper-button.html">


<link rel="import"
      href="../spirit-team/spirit-team.html">
<link rel="import"
      href="../view-behavior/view-behavior.html">
<link rel="import"
      href="../shared-styles/shared-styles.html">
<script src="../spirit-selector.js"></script>


<dom-module id="team-view">
    <template>
        <style include="shared-styles">
             :host {
                display: block;
            }
            spirit-team {
                height: 50vh;
            }
            paper-button {
                margin-left: 25%;
                width: 50%;
            }
        </style>

        <div class="text">
            Congratulations! You have found a spirit at each location,
            and now they have all come together to protect Prairie Creek
            Park.
        </div>

        <spirit-team id="team"></spirit-team>

        <paper-button raised
                      on-tap="_next">Play Again</paper-button>
    </template>
    <script>
        Polymer({
            is: 'team-view',
            behaviors: [ViewBehavior],
            properties: {
                mapData: Object
            },
            observers: [
                '_appStateChanged(appState)'
            ],
            _next: function () {
                this._goToView('title');
            },
            _selectedSpiritImages: function () {
                var array = [];
                for (var i = 0; i < this.mapData.length; i++) {
                    var selected = selectSpirit(this.mapData[i]);
                    array.push(selected.image);
                }
                return array;
            },
            _appStateChanged: function (state) {
                if (state === 'team') {
                    this.$.team.images = this._selectedSpiritImages();
                }
            }
        });
    </script>
</dom-module>